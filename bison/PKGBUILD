#!/bin/bash
# Original Maintainer: Anh K. Huynh <theslinux.org>
# Original Original Maintainer: Allan McRae <allan@archlinux.org>
# Original Original Contributor: Eric Belanger <eric@archlinux.org>

# FIXME: New versio bison-3.0 will cause issue with
# FIXME: some packages. For example, krb5-1.11.{1,3}
# FIXME: are unable to be built with new bison..
# FIXME: So we now stay with bison-2.7...

pkgdesc="The GNU general-purpose parser generator"
arch=('i686' 'x86_64')
license=('GPL3')
url="http://www.gnu.org/software/bison/bison.html"
depends=('glibc' 'm4' 'sh')
groups=('base-devel')
install=bison.install
source=(ftp://ftp.gnu.org/gnu/bison/${pkgbase}-${pkgver}.tar.xz{,.sig})

build() {
  cd ${srcdir}/${pkgbase}-${pkgver}
  ./configure --prefix=/usr --datadir=/usr/share
  make
}

check() {
  cd ${srcdir}/${pkgbase}-${pkgver}
  make check
}

package() {
  cd ${srcdir}/${pkgbase}-${pkgver}
  make DESTDIR=${pkgdir} install
}
