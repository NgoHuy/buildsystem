# Maintainer: Severus <severus@theslinux.org>
# Original Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Original Contributor: Georg Grabler <ggrabler@gmail.com>

pkgdesc="The ideal accompaniment to a light-weight Window Manager such as OpenBox, or a desktop-drawing program like iDesk."
arch=('any')
url="http://savannah.nongnu.org/projects/perlpanel"
license=('GPL')
install=perlpanel.install
depends=('glade-perl' 'gnome-vfs-perl' 'perl-date-manip' 'perl-gnome2-wnck' 'perl-locale-gettext' 'perl-xml-parser' 'perl-xml-simple' 'hicolor-icon-theme')
optdepends=('perl-xmms: XMMS applet')
source=(http://archlinux-stuff.googlecode.com/files/PerlPanel-$pkgver.tar.gz
	arch.patch)

build() {
  cd $srcdir/PerlPanel
  chmod -R u+w *
  sed -i 's|PREFIX=/usr/local|PREFIX=/usr|' Makefile

  patch -p1 <../arch.patch

  make
}

package() {
  cd $srcdir/PerlPanel

  make DESTDIR=$pkgdir install

  find $pkgdir -name '.packlist' -exec rm '{}' \;
  find $pkgdir -name 'perllocal.pod' -exec rm '{}' \;
  find $pkgdir -depth -type d -empty -exec rmdir '{}' \;
  find $pkgdir -depth -type d -name CVS -exec rm -rf {} \;
}
