From bc8a099951317b0db02d89dc4f20d9a45c0cc3b0 Mon Sep 17 00:00:00 2001
From: Ky-Anh Huynh <kyanh@theslinux.org>
Date: Tue, 16 Apr 2013 21:47:16 +0000
Subject: [PATCH] Allow some package information to be fetched externally

The original "makepkg" will reset all package information, and that diasllows
to support some hooks (no we do not have any hook when using PKGBUILD.)
---
 pacman/src/pacman-4.1.0/scripts/makepkg.sh.in | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/pacman/src/pacman-4.1.0/scripts/makepkg.sh.in b/pacman/src/pacman-4.1.0/scripts/makepkg.sh.in
index da620a4..389dee7 100644
--- a/pacman/src/pacman-4.1.0/scripts/makepkg.sh.in
+++ b/pacman/src/pacman-4.1.0/scripts/makepkg.sh.in
@@ -2733,6 +2733,11 @@ unset pkgname pkgbase pkgver pkgrel epoch pkgdesc url license groups provides
 unset md5sums replaces depends conflicts backup source install changelog build
 unset makedepends optdepends options noextract
 
+pkgname="${PACKAGE_NAME:-}"
+pkgver="${PACKAGE_VERSION:-}"
+pkgrel="${PACKAGE_RELEASE:-}"
+pkgbase="${PACKAGE_BASE:-}"
+
 BUILDFILE=${BUILDFILE:-$BUILDSCRIPT}
 if [[ ! -f $BUILDFILE ]]; then
 	if [[ -t 0 ]]; then
-- 
1.8.3

