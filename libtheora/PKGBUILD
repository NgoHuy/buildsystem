# Maintainer: Severus <severus@theslinux.org>
# Original Maintainer: Tom Killian <tom@archlinux.org>
# Committer: dorphell <dorphell@archlinux.org>

pkgdesc="An open video codec developed by the Xiph.org"
arch=('i686' 'x86_64')
url="http://www.xiph.org"
license=('BSD')
depends=('libogg')
makedepends=('libvorbis')
options=('!libtool')
source=(http://downloads.xiph.org/releases/theora/libtheora-${pkgver}.tar.bz2
        libtheora-1.1.1-libpng16.patch)

prepare() {
  cd ${pkgbase}-${pkgver}
  patch -Np0 -i ../libtheora-1.1.1-libpng16.patch
}

build() {
  cd ${pkgbase}-${pkgver}
  ./configure --prefix=/usr --enable-shared --disable-static
  make
}

package() {
  cd ${pkgbase}-${pkgver}
  make DESTDIR="${pkgdir}" install

  install -m755 -d "${pkgdir}/usr/share/licenses/${pkgbase}"
  install -m644 LICENSE COPYING "${pkgdir}/usr/share/licenses/${pkgbase}/"
}
