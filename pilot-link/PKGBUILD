# Maintainer: Severus <severus@theslinux.org>
# Original Maintainer: dale <dale@archlinux.org>

# todo: add perl support, DESTDIR has no affect on perl
# and it seems that moving the files manually doesn't work

pkgdesc="A suite of tools for connecting to PalmOS handheld devices"
arch=(i686 x86_64)
license=('GPL' 'LGPL')
depends=('readline>=6.0' 'libpng>=1.6.0' 'libusb-compat' 'popt' 'bluez-libs')
options=('!libtool')
url="http://www.pilot-link.org/"
source=(http://downloads.pilot-link.org/${pkgbase}-${pkgver}.7z{,.asc}
        pilot-link-png14.patch)

prepare() {
  cd ${pkgbase}-${pkgver}
  patch -Np1 -i "${srcdir}/pilot-link-png14.patch"
}

build() {
  cd ${pkgbase}-${pkgver}
  ./configure --prefix=/usr --enable-conduits --enable-libusb \
    --with-libiconv --with-libpng --disable-static
  make
}

package() {
  cd ${pkgbase}-${pkgver}
  make DESTDIR="${pkgdir}" install
}
