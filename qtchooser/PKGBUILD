# Maintainer: Severus <severus@theslinux.org>
# Original Maintainer: Andrea Scarpino <andrea@archlinux.org>

pkgdesc='Wrap the other Qt tools by searching for different instances of Qt on the system'
arch=('i686' 'x86_64')
url='http://qt.gitorious.org/qt/qtchooser'
license=('GPL')
backup=('etc/xdg/qtchooser/default.conf')
depends=('gcc-libs')
source=("http://macieira.org/${pkgbase}/${pkgbase}-${pkgver}-g980c64c.tar.gz"
        {3,4,5}.conf)

build() {
  cd ${pkgbase}-${pkgver}-g980c64c
  make
}

package() {
  cd ${pkgbase}-${pkgver}-g980c64c
  make INSTALL_ROOT="${pkgdir}" install

  install -d "${pkgdir}"/etc/xdg/qtchooser
  install -m644 "${srcdir}"/{3,4,5}.conf \
    "${pkgdir}"/etc/xdg/qtchooser/
  
  # Set the default Qt
  ln -s /etc/xdg/qtchooser/5.conf \
    "${pkgdir}"/etc/xdg/qtchooser/default.conf
}
