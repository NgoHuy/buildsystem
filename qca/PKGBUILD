# Maintainer: Severus <severus@theslinux.org>
# Original Maintainer: Andrea Scarpino <andrea@archlinux.org>
# Original Contributor: Pierre Schmitz <pierre@archlinux.de>

pkgdesc="Qt Cryptographic Architecture"
arch=('i686' 'x86_64')
url="http://delta.affinix.com/qca/"
license=('LGPL')
depends=('qt4' 'ca-certificates')
source=("http://delta.affinix.com/download/qca/2.0/${pkgbase}-${pkgver}.tar.bz2"
        'gcc47.patch')

build() {
    . /etc/profile.d/qt4.sh

	cd $srcdir/${pkgbase}-${pkgver}
	patch -p0 -i ${srcdir}/gcc47.patch
	./configure \
		--prefix=/usr \
		--disable-tests \
		--certstore-path=/etc/ssl/certs/ca-certificates.crt \
		--release \
		--no-separate-debug-info
	make
}

package() {
	cd ${srcdir}/${pkgbase}-${pkgver}
	make INSTALL_ROOT=${pkgdir} install
}
