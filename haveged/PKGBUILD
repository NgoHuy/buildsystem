# Maintainer: Severus <severus@theslinux.org>
# Original Maintainer:  Bart≈Çomiej Piotrowski <barthalion@gmail.com>
# Original Contributor: kfgz <kfgz at interia dot pl>
# Original Contributor: pootzko <pootzko at gmail dot com>

_pkgver=${pkgver/.c/c}
pkgdesc='Entropy harvesting daemon using CPU timings'
arch=('i686' 'x86_64')
url='http://www.issihosts.com/haveged'
license=('GPL')
depends=('glibc')
options=('!libtool')
source=($url/$pkgbase-$_pkgver.tar.gz
        service)

build() {
  cd $pkgbase-$_pkgver
  ./configure --prefix=/usr --bindir=/usr/bin --sbindir=/usr/bin
  make
}

package() {
  cd $pkgbase-$_pkgver
  make DESTDIR="$pkgdir" install

  rm -rf "$pkgdir"/etc/init.d
  install -D -m644 "$srcdir"/service \
    "$pkgdir"/usr/lib/systemd/system/haveged.service
}
