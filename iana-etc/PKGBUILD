#!/bin/bash

# Original script is maintained by Gaetan Bisson <bisson@archlinux.org>
# The script can be found on the Arch's ABS system.
# KyAnh imported the package `iana-etc` from Arch's ABS
# and modify them to use in `TheSLinux`. The field `maintainer`
# of this file was modified to have it to work with `makepkg`.

# Original Original Contributor: Thomas BÃ¤chler <thomas@archlinux.org>
# Original Original Maintainer: Gaetan Bisson <bisson@archlinux.org>

pkgdesc='/etc/protocols and /etc/services provided by IANA'
url='http://sethwklein.net/iana-etc.html'
arch=('any')
license=('custom:OSL3')
backup=('etc/'{protocols,services})
source=("http://sethwklein.net/${pkgbase}-${pkgver}.tar.bz2"
        'newer.patch')

build() {
	cd "${srcdir}/${pkgbase}-${pkgver}"
	patch -p1 -i ../newer.patch
	make get
	make
}

check() {
	cd "${srcdir}/${pkgbase}-${pkgver}"
	make test
}

package() {
	cd "${srcdir}/${pkgbase}-${pkgver}"
	make DESTDIR="${pkgdir}" install
	install -Dm644 COPYING "${pkgdir}/usr/share/licenses/iana-etc/LICENSE"
	install -Dm644 port-numbers.iana "${pkgdir}/usr/share/iana-etc/port-numbers.iana"
	install -Dm644 protocol-numbers.iana "${pkgdir}/usr/share/iana-etc/protocol-numbers.iana"
}
