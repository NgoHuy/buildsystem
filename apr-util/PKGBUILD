# Maintainer: Anh K. Huynh <kyanh@theslinux.org>
# Original Maintainer: Jan de Groot <jgc@archlinux.org>
# Original Maintainer: Pierre Schmitz <pierre@archlinux.de>

pkgdesc="The Apache Portable Runtime"
arch=('i686' 'x86_64')
url="http://apr.apache.org/"
depends=('apr' 'gdbm' 'expat' 'db' 'libldap' 'unixodbc')
options=('!libtool')
license=('APACHE')
source=("http://www.apache.org/dist/apr/${PACKAGE_BASE}-${PACKAGE_VERSION}.tar.bz2")

build() {
  cd "${pkgbase}-${pkgver}"
  ./configure \
    --prefix=/usr \
    --with-apr=/usr \
    --without-pgsql \
    --without-mysql \
    --without-sqlite2 \
    --without-sqlite3 \
    --with-berkeley-db=/usr \
    --with-gdbm=/usr \
  make
}

check() {
  cd "${pkgbase}-${pkgver}"
  make -j1 check
}

package() {
  cd "${pkgbase}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
