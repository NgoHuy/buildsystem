# Maintainer: Severus <severus@theslinux.org>
# Original Maintainer: Evangelos Foutras <evangelos@foutrelis.com>
# Original Contributor: Ionut Biru <ibiru@archlinux.org>

pkgdesc="Audio/Video Communications Framework (legacy version)"
arch=('i686' 'x86_64')
url="http://www.freedesktop.org/wiki/Software/Farstream"
license=('LGPL2.1')
depends=('libnice' 'gstreamer0.10-base' 'gstreamer0.10-bad-plugins'
         'gstreamer0.10-good' 'gstreamer0.10-ffmpeg')
makedepends=('gobject-introspection' 'gstreamer0.10-python' 'python2-gobject2')
options=('!libtool')
source=(http://freedesktop.org/software/$_pkgbase/releases/$_pkgbase/$_pkgbase-$pkgver.tar.gz
        farstream-0.1.2-prefer-vp8.patch
        farstream-0.1.2-introspection-tag-order.patch)

build() {
  cd "$_pkgbase-$pkgver"

  patch -Np1 -i "$srcdir/farstream-0.1.2-prefer-vp8.patch"
  patch -Np1 -i "$srcdir/farstream-0.1.2-introspection-tag-order.patch"

  ./configure \
    --prefix=/usr \
    --with-package-name='Arch Linux Farstream 0.1 Package' \
    --with-package-origin='httpw://www.archlinux.org/' \
    --disable-static
  make
}

package() {
  cd "$_pkgbase-$pkgver"

  make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et:
