#!/bin/bash

# Maintainer: Anh K. Huynh <kyanh@theslinux.org>
# Original Contributor: Tom Newsom <Jeepster@gmx.co.uk>

pkgdesc="GNU version of awk"
arch=('i686' 'x86_64')
url="http://www.gnu.org/directory/GNU/gawk.html"
license=('GPL')
groups=('base' 'base-devel')
depends=('sh' 'glibc')
provides=('awk')
install=gawk.install
source=(ftp://ftp.gnu.org/pub/gnu/${pkgbase}/${pkgbase}-${pkgver}.tar.gz{,.sig})

build() {
  cd ${srcdir}/${pkgbase}-${pkgver}
  ./configure --prefix=/usr --libexecdir=/usr/lib
  make
}

check() {
  cd ${srcdir}/${pkgbase}-${pkgver}
  make check
}

package() {
  cd ${srcdir}/${pkgbase}-${pkgver}
  make DESTDIR=${pkgdir} install

  install -dm755 ${pkgdir}/bin
  ln -sf /usr/bin/gawk ${pkgdir}/bin/
  ln -sf gawk ${pkgdir}/bin/awk
}
